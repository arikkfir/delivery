apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
namespace: main
commonAnnotations:
  kfirs.com/branch: main
  kfirs.com/environment: main
resources:
  - namespace.yaml
  - secret-github-token.yaml
  - gitrepository-echo-server.yaml
  - kustomization-echo-server.yaml
  - gitrepository-greenstar.yaml
  - kustomization-greenstar.yaml
patches:
  # Main environment should use the ACME PRODUCTION server for browsers to trust this environment
  - target:
      group: cert-manager.io
      version: v1
      kind: Certificate
    patch: |-
      - op: replace
        path: /spec/issuerRef/name
        value: google-clouddns-prod
